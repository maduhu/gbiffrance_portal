#{extends 'main.html' /}
#{set title:'Home' /}
<link rel="stylesheet" media="screen" href="@{'/public/stylesheets/leaflet.css'}">
      
      <script src="@{'/public/javascripts/mapping/leaflet-src.js'}"></script>

  <script src="http://lully.snv.jussieu.fr/gbif/mapping/test_maps/wax/dist/wax.leaf.min.js">
  </script>
<script type="text/javascript">
 
$(document).ready(function() {

dataset='${occurrence.dataset.id}';

dataset_name='${occurrence.datasetName}';

lat=${occurrence.decimalLatitude};
lng=${occurrence.decimalLongitude};
taxa='${occurrence.scientificName}';

var kingdom='${occurrence.kingdom_interpreted}'
var phylum='${occurrence.phylum_interpreted}' 
var classs='${occurrence.classs_interpreted}'
var order='${occurrence.orderr_interpreted}'
var family='${occurrence.family_interpreted}' 
genus='${occurrence.genus_interpreted}' 

var specificEpithet='${specificEpithet_interpreted}'

map = new L.Map('map',{ 'crs': L.CRS.EPSG900913})

url='http://a.tiles.mapbox.com/v1/perikut.map-ua7dmxeg.jsonp';

wax.tilejson(url, function(tilejson) {
          basemap = new wax.leaf.connector(tilejson);         
            map.addLayer(basemap,true)
              })

$('#map').show();
var latlng=new L.LatLng(lat,lng);
//to be changed
var to_plot='scientificname';

map.setView(latlng, 6); 
map.addLayer(new L.Marker(latlng)); 

});
</script>
<div class="container">

  <div class="well">
  #{if taxa}
    <ul class="breadcrumb">
      #{if taxa.kingdomID}
      <li><i><a href="@{Taxas.show(taxa.kingdomID)}">${taxa.canonicalKingdom}</a></i><span class="divider">/</span></li>#{/if}
      <li><i><a href="@{Taxas.show(taxa.phylumID)}">${taxa.canonicalPhylum}</a></i><span class="divider">/</span></li>
      <li><i><a href="@{Taxas.show(taxa.classID)}">${taxa.canonicalClass}</a></i><span class="divider">/</span></li>
      <li><i><a href="@{Taxas.show(taxa.orderID)}">${taxa.canonicalOrder}</a></i><span class="divider">/</span></li>
      <li><i><a href="@{Taxas.show(taxa.familyID)}">${taxa.canonicalFamily}</a></i><span class="divider">/</span></li>
      <li><i><a href="@{Taxas.show(taxa.genusID)}">${taxa.canonicalGenus}</a></i><span class="divider">/</span></li>
      #{if taxa.species}
        <li><i><a href="@{Taxas.show(taxa.speciesID)}">${taxa.canonicalSpecies}</a></i></li>
      #{/if}
    </ul>
    <div style="overflow: hidden;">  
      #{if occurrence.associatedMedia}<img style="float:right;" width="200" height="150" src="${occurrence.associatedMedia}"/>#{/if}
      <div  class="page-header">
        <h1>${occurrence.scientificName}</h1>
        #{if taxa.canonicalSpecies}
          <h3>&{'interpretedAs'} <i>${taxa.species}</i></h3>
        #{/if}
        #{elseif taxa.canonicalGenus}
          <h3>interpreted as <i>${taxa.genus}</i></h3>
        #{/elseif}
      </div>
      <h4>${occurrence.dataset.title} - ${occurrence.dataset.dataPublisher.name}</h4>
    </div>
  #{/if}
  #{else}
    <h6>
      No references
    </h6>
    <h1>${occurrence.scientificName}</h1>
    <h4>${occurrence.dataset.title}</h4>
  #{/else}
  </div> 
  #{if occurrence.decimalLatitude && occurrence.decimalLongitude}
    <div id='map' style='display:none;width:70%px;height:300px'></div> 
      <!-- to extend to all taxa levels, this is just for testing   -->
   <!-- <div style="margin:10px;">
      <button id='geo_genus'>All occurrences for Specie</button>
      <button id='polygon_genus'>All polygon for Specie</button>
    </div>  
    -->
  #{/if}
  #{if occurrence.occurrenceID || 
	   occurrence.catalogNumber || 
	   occurrence.occurrenceRemarks || 
	   occurrence.recordNumber || 
	   occurrence.recordedBy || 
	   occurrence.individualID || 
	   occurrence.individualCount || 
	   occurrence.sex || 
	   occurrence.lifeStage || 
	   occurrence.reproductiveCondition || 
	   occurrence.behavior || 
	   occurrence.establishmentMeans || 
	   occurrence.occurrenceStatus || 
	   occurrence.preparations || 
	   occurrence.disposition || 
	   occurrence.otherCatalogNumbers || 
	   occurrence.previousIdentifications || 
	   occurrence.associatedMedia || 
	   occurrence.associatedReferences || 
	   occurrence.associatedOccurrences || 
	   occurrence.associatedSequences || 
	   occurrence.associatedTaxa
  }
  <div class="occurrence-info">
    <h3>Occurrence</h3>
    <table class="table table-condensed table-striped">
      <tbody>
      #{if occurrence.occurrenceID}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#occurrenceID">&{'occurrenceID'}</a></th><td>${occurrence.occurrenceID}</td></tr>#{/if}
      #{if occurrence.catalogNumber}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#catalogNumber">&{'catalogNumber'}</a></th><td>${occurrence.catalogNumber}</td></tr>#{/if}
      #{if occurrence.occurrenceRemarks}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#occurrenceRemarks">&{'occurrenceRemarks'}</a></th><td>${occurrence.occurrenceRemarks}</td></tr>#{/if}
      #{if occurrence.recordNumber}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#recordNumber">&{'recordNumber'}</a></th><td>${occurrence.recordNumber}</td></tr>#{/if}
      #{if occurrence.recordedBy}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#recordedBy">&{'recordedBy'}</a></th><td>${occurrence.recordedBy}</td></tr>#{/if}
	  #{if occurrence.individualID}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#individualID">&{'individualID'}</a></th><td>${occurrence.individualID}</td></tr>#{/if}
	  #{if occurrence.individualCount}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#individualCount">&{'individualCount'}</a></th><td>${occurrence.individualCount}</td></tr>#{/if}
	  #{if occurrence.sex}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#sex">&{'sex'}</a></th><td>${occurrence.sex}</td></tr>#{/if}
	  #{if occurrence.lifeStage}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#lifeStage">&{'lifeStage'}</a></th><td>${occurrence.lifeStage}</td></tr>#{/if}
	  #{if occurrence.reproductiveCondition}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#reproductiveCondition">&{'reproductiveCondition'}</a></th><td>${occurrence.reproductiveCondition}</td></tr>#{/if}
	  #{if occurrence.behavior}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#behavior">&{'behavior'}</a></th><td>${occurrence.behavior}</td></tr>#{/if}
	  #{if occurrence.establishmentMeans}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#establishmentMeans">&{'establishmentMeans'}</a></th><td>${occurrence.establishmentMeans}</td></tr>#{/if}
	  #{if occurrence.occurrenceStatus}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#occurrenceStatus">&{'occurrenceStatus'}</a></th><td>${occurrence.occurrenceStatus}</td></tr>#{/if}
	  #{if occurrence.preparations}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#preparations">&{'preparations'}</a></th><td>${occurrence.preparations}</td></tr>#{/if}
	  #{if occurrence.disposition}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#disposition">&{'disposition'}</a></th><td>${occurrence.disposition}</td></tr>#{/if}
	  #{if occurrence.otherCatalogNumbers}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#otherCatalogNumbers">&{'otherCatalogNumbers'}</a></th><td>${occurrence.otherCatalogNumbers}</td></tr>#{/if}
	  #{if occurrence.previousIdentifications}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#previousIdentifications">&{'previousIdentifications'}</a></th><td>${occurrence.previousIdentifications}</td></tr>#{/if}
	  #{if occurrence.associatedMedia}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#associatedMedia">&{'associatedMedia'}</a></th><td>${occurrence.associatedMedia}</td></tr>#{/if}
	  #{if occurrence.associatedReferences}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#associatedReferences">&{'associatedReferences'}</a></th><td>${occurrence.associatedReferences}</td></tr>#{/if}
	  	  #{if occurrence.associatedOccurrences}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#associatedOccurrences">&{'associatedOccurrences'}</a></th><td>${occurrence.associatedOccurrences}</td></tr>#{/if}
	  #{if occurrence.associatedSequences}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#associatedSequences">&{'associatedSequences'}</a></th><td>${occurrence.associatedSequences}</td></tr>#{/if}
	  #{if occurrence.associatedTaxa}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#associatedTaxa">&{'associatedTaxa'}</a></th><td>${occurrence.associatedTaxa}</td></tr>#{/if}
	  </tbody>
	</table>
  </div>
  #{/if}
  #{if occurrence.typee || 
	   occurrence.modified || 
	   occurrence.language || 
	   occurrence.rights || 
	   occurrence.rightsHolder || 
	   occurrence.accessRights || 
	   occurrence.bibliographicCitation || 
	   occurrence.referencess || 
	   occurrence.institutionID || 
	   occurrence.collectionID || 
	   occurrence.datasetID || 
	   occurrence.institutionCode || 
	   occurrence.collectionCode || 
	   occurrence.datasetName || 
	   occurrence.ownerInstitutionCode || 
	   occurrence.basisOfRecord || 
	   occurrence.informationWithheld || 
	   occurrence.dataGeneralizations || 
	   occurrence.dynamicProperties
  }
  <div class="record-info">
    <h3>Record</h3>
    <table class="table table-condensed table-striped">
      <tbody>
      #{if occurrence.typee}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#type">&{'typee'}</a></th><td> ${occurrence.basisOfRecord}</td></tr>#{/if}
      #{if occurrence.modified}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#modified">&{'modified'}</a></th><td> <b>${occurrence.modified}</b></td></tr>#{/if}
      #{if occurrence.language}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#language">&{'language'}</a></th><td> ${occurrence.language}</td></tr>#{/if}
      #{if occurrence.rights}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#rights">&{'rights'}</a></th><td> ${occurrence.rights}</td></tr>#{/if}
	  #{if occurrence.rightsHolder}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#rightsHolder">&{'rightsHolder'}</a></th><td> ${occurrence.rightsHolder}</td></tr>#{/if}
	  #{if occurrence.accessRights}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#accessRights">&{'accessRights'}</a></th><td> ${occurrence.accessRights}</td></tr>#{/if}
	  #{if occurrence.bibliographicCitation}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#bibliographicCitation">&{'bibliographicCitation'}</a></th><td> ${occurrence.bibliographicCitation}</td></tr>#{/if}
	  #{if occurrence.referencess}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#references">&{'referencess'}</a></th><td> ${occurrence.referencess}</td></tr>#{/if}
	  #{if occurrence.institutionID}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#institutionID">&{'institutionID'}</a></th><td> ${occurrence.institutionID}</td></tr>#{/if}
	  #{if occurrence.collectionID}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#collectionID">&{'collectionID'}</a></th><td> ${occurrence.collectionID}</td></tr>#{/if}
	   #{if occurrence.institutionCode}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#institutionCode">&{'institutionCode'}</a></th><td> ${occurrence.institutionCode}</td></tr>#{/if}
	  #{if occurrence.collectionCode}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#collectionCode">&{'collectionCode'}</a></th><td> ${occurrence.collectionCode}</td></tr>#{/if}
	  #{if occurrence.datasetName}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#datasetName">&{'datasetName'}</a></th><td> ${occurrence.datasetName}</td></tr>#{/if}
	  #{if occurrence.ownerInstitutionCode}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#ownerInstitutionCode">&{'ownerInstitutionCode'}</a></th><td> ${occurrence.ownerInstitutionCode}</td></tr>#{/if}
	  #{if occurrence.informationWithheld}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#informationWithheld">&{'informationWithheld'}</a></th><td> ${occurrence.informationWithheld}</td></tr>#{/if}
	  #{if occurrence.dataGeneralizations}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'dataGeneralizations'}</a></th><td> ${occurrence.dataGeneralizations}</td></tr>#{/if}
	  #{if occurrence.dynamicProperties}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'dynamicProperties'}</a></th><td> ${occurrence.dynamicProperties}</td></tr>#{/if}
      </tbody>
    </table>  
  </div>
  #{/if}
 #{include 'Occurrences/show_taxa.html' /}
  #{if occurrence.identificationID || 
	   occurrence.identifiedBy || 
	   occurrence.dateIdentified || 
	   occurrence.identificationVerificationStatus || 
	   occurrence.identificationRemarks || 
	   occurrence.identificationQualifier
  }
  <div class="identification-info">
    <h3>Identification</h3>
    <table class="table table-condensed table-striped">
      <tbody>
    #{if occurrence.identificationID}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#identificationID">&{'identificationID'}</a></th><td> ${occurrence.identificationID}</td></tr>#{/if}
    #{if occurrence.identifiedBy}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#identifiedBy">&{'identifiedBy'}</a></th><td> ${occurrence.identifiedBy}</td></tr>#{/if}
    #{if occurrence.dateIdentified}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#dateIdentifie">&{'dateIdentified'}</a></th><td> ${occurrence.dateIdentified}</td></tr>#{/if}
    #{if occurrence.identificationVerificationStatus}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#identificationVerificationStatus">&{'identificationVerificationStatus'}</a></th><td> ${occurrence.identificationVerificationStatus}</td></tr>#{/if}
    #{if occurrence.identificationRemarks}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#identificationRemarks">&{'identificationRemarks'}</a></th><td> ${occurrence.identificationRemarks}</td></tr>#{/if}
    #{if occurrence.identificationQualifier}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#identificationQualifier">&{'identificationQualifier'}</a></th><td> ${occurrence.identificationQualifier}</td></tr>#{/if}
    </tbody>
    </table>  
  </div>
  #{/if}
  #{if occurrence.eventID || 
	   occurrence.samplingProtocol || 
	   occurrence.samplingEffort || 
	   occurrence.eventDate || 
	   occurrence.eventTime || 
	   occurrence.startDayOfYear || 
	   occurrence.endDayofYear || 
	   occurrence.year || 
	   occurrence.month || 
	   occurrence.day || 
	   occurrence.verbatimEventDate || 
	   occurrence.habitat || 
	   occurrence.fieldNumber || 
	   occurrence.fieldNotes || 
	   occurrence.eventRemarks || 
	   occurrence.typeStatus  
  }
  <div class="event-info">
    <h3>Event</h3>
    <table class="table table-condensed table-striped">
      <tbody>
      #{if occurrence.eventID}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#eventID">&{'eventID'}</a></th><td> ${occurrence.eventID}</td></tr>#{/if}
      #{if occurrence.samplingProtocol}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'samplingProtocol'}</a></th><td> ${occurrence.samplingProtocol}</td></tr>#{/if}
      #{if occurrence.samplingEffort}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'samplingEffort'}</a></th><td> ${occurrence.samplingEffort}</td></tr>#{/if}
      #{if occurrence.eventDate}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'eventDate'}</a></th><td> ${occurrence.eventDate}</td></tr>#{/if}
      #{if occurrence.eventTime}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'eventTime'}</a></th><td> ${occurrence.eventTime}</td></tr>#{/if}
      #{if occurrence.startDayOfYear}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'startDayOfYear'}</a></th><td> ${occurrence.startDayOfYear}</td></tr>#{/if}
      #{if occurrence.endDayofYear}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'endDayOfYear'}</a></th><td> ${occurrence.endDayofYear}</td></tr>#{/if}
      #{if occurrence.year}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'year'}</a></th><td> ${occurrence.year}</td></tr>#{/if}
      #{if occurrence.month}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'month'}</a></th><td> ${occurrence.month}</td></tr>#{/if}
      #{if occurrence.day}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'day'}</a></th><td> ${occurrence.day}</td></tr>#{/if}
      #{if occurrence.verbatimEventDate}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'verbatimEventDate'}</a></th><td> ${occurrence.verbatimEventDate}</td></tr>#{/if}
      #{if occurrence.habitat}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'habitat'}</a></th><td> ${occurrence.habitat}</td></tr>#{/if}
      #{if occurrence.fieldNumber}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'fieldNumber'}</a></th><td> ${occurrence.fieldNumber}</td></tr>#{/if}
      #{if occurrence.fieldNotes}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'fieldsNotes'}</a></th><td> ${occurrence.fieldNotes}</td></tr>#{/if}
      #{if occurrence.eventRemarks}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'eventRemarks'}</a></th><td> ${occurrence.eventRemarks}</td></tr>#{/if}
      #{if occurrence.typeStatus}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#">&{'typeStatus'}</a></th><td> ${occurrence.typeStatus}</td></tr>#{/if}
    </tbody>
    </table>  
  </div>
  #{/if}
  #{if occurrence.locationID || 
	   occurrence.higherGeographyID || 
	   occurrence.higherGeography || 
	   occurrence.continent || 
	   occurrence.waterBody || 
	   occurrence.islandGroup || 
	   occurrence.island || 
	   occurrence.country || 
	   occurrence.countryCode || 
	   occurrence.stateProvince || 
	   occurrence.county || 
	   occurrence.municipality || 
	   occurrence.locality || 
	   occurrence.verbatimLocality || 
	   occurrence.verbatimElevation || 
	   occurrence.minimumElevationInMeters || 
	   occurrence.maximumElevationInMeters || 
	   occurrence.verbatimDepth || 
	   occurrence.minimumDepthInMeters || 
	   occurrence.maximumDepthInMeters || 
	   occurrence.minimumDistanceAboveSurfaceInMeters || 
	   occurrence.maximumDistanceAboveSurfaceInMeters || 
	   occurrence.locationAccordingTo || 
	   occurrence.locationRemarks || 
	   occurrence.verbatimCoordinates || 
	   occurrence.verbatimLatitude || 
	   occurrence.verbatimLongitude || 
	   occurrence.verbatimCoordinateSystem || 
	   occurrence.verbatimSRS || 
	   occurrence.decimalLatitude || 
	   occurrence.decimalLongitude || 
	   occurrence.geodeticDatum || 
	   occurrence.coordinateUncertaintyInMeters || 
	   occurrence.coordinatePrecision || 
	   occurrence.pointRadiusSpatialFit || 
	   occurrence.footprintWKT || 
	   occurrence.footprintSRS || 
	   occurrence.footprintSpatialFit || 
	   occurrence.georeferencedBy || 
	   occurrence.georeferencedDate || 
	   occurrence.georeferenceProtocol || 
	   occurrence.georeferenceSources || 
	   occurrence.georeferenceVerificationStatus || 
	   occurrence.georeferenceRemarks
  }
  <div class="location-info">
    <h3>Location</h3>
    <table class="table table-condensed table-striped">
      <tbody>
    #{if occurrence.locationID}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#locationID">&{'locationID'}</a></th><td> ${occurrence.locationID}</td></tr>#{/if}
    #{if occurrence.higherGeographyID}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#higherGeographyID">&{'higherGeographyID'}</a></th><td> ${occurrence.higherGeographyID}</td></tr>#{/if}
    #{if occurrence.higherGeography}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#higherGeography">&{'higherGeography'}</a></th><td> ${occurrence.higherGeography}</td></tr>#{/if}
    #{if occurrence.continent}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#continent">&{'continent'}</a></th><td> ${occurrence.continent}</td></tr>#{/if}
    #{if occurrence.waterBody}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#waterBody">&{'waterBody'}</a></th><td> ${occurrence.waterBody}</td></tr>#{/if}
    #{if occurrence.islandGroup}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#islandGroup">&{'islandGroup'}</a></th><td> ${occurrence.islandGroup}</td></tr>#{/if}
    #{if occurrence.island}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#island">&{'island'}</a></th><td> ${occurrence.island}</td></tr>#{/if}
    #{if occurrence.country}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#country">&{'country'}</a></th><td> ${occurrence.country}</td></tr>#{/if}
    #{if occurrence.countryCode}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#countryCode">&{'countryCode'}</a></th><td> ${occurrence.countryCode}</td></tr>#{/if}
    #{if occurrence.stateProvince}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#stateProvince">&{'stateProvince'}</a></th><td> ${occurrence.stateProvince}</td></tr>#{/if}
    #{if occurrence.county}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#county">&{'county'}</a></th><td> ${occurrence.county}</td></tr>#{/if}
    #{if occurrence.municipality}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#municipality">&{'municipality'}</a></th><td> ${occurrence.municipality}</td></tr>#{/if}
    #{if occurrence.locality}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#locality">&{'locality'}</a></th><td> ${occurrence.locality}</td></tr>#{/if}
    #{if occurrence.verbatimLocality}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#verbatimLocality">&{'verbatimLocality'}</a></th><td> ${occurrence.verbatimLocality}</td></tr>#{/if}
    #{if occurrence.verbatimElevation}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#verbatimElevation">&{'verbatimElevation'}</a></th><td> ${occurrence.verbatimElevation}</td></tr>#{/if}
    #{if occurrence.minimumElevationInMeters}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#minimumElevationInMeters">&{'minimumElevationInMeters'}</a></th><td> ${occurrence.minimumElevationInMeters}</td></tr>#{/if}
    #{if occurrence.maximumElevationInMeters}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#"maximumElevationInMeters>&{'maximumElevationInMeters'}</a></th><td> ${occurrence.maximumElevationInMeters}</td></tr>#{/if}
    #{if occurrence.verbatimDepth}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#verbatimDepth">&{'verbatimDepth'}</a></th><td> ${occurrence.verbatimDepth}</td></tr>#{/if}
    #{if occurrence.minimumDepthInMeters}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#minimumDepthInMeters">&{'minimumDepthInMeters'}</a></th><td> ${occurrence.minimumDepthInMeters}</td></tr>#{/if}
    #{if occurrence.maximumDepthInMeters}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#maximumDepthInMeters">&{'maximumDepthInMeters'}</a></th><td> ${occurrence.maximumDepthInMeters}</td></tr>#{/if}
    #{if occurrence.minimumDistanceAboveSurfaceInMeters}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#minimumDistanceAboveSurfaceInMeters">&{'minimumDistanceAboveSurfaceInMeters'}</a></th><td> ${occurrence.minimumDistanceAboveSurfaceInMeters}</td></tr>#{/if}
    #{if occurrence.maximumDistanceAboveSurfaceInMeters}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#maximumDistanceAboveSurfaceInMeters">&{'maximumDistanceAboveSurfaceInMeters'}</a></th><td> ${occurrence.maximumDistanceAboveSurfaceInMeters}</td></tr>#{/if}
    #{if occurrence.locationAccordingTo}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#locationAccordingTo">&{'locationAccordingTo'}</a></th><td> ${occurrence.locationAccordingTo}</td></tr>#{/if}
    #{if occurrence.locationRemarks}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#locationRemarks">&{'locationRemarks'}</a></th><td> ${occurrence.locationRemarks}</td></tr>#{/if}
    #{if occurrence.verbatimCoordinates}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#verbatimCoordinates">&{'verbatimCoordinates'}</a></th><td> ${occurrence.verbatimCoordinates}</td></tr>#{/if}
    #{if occurrence.verbatimLatitude}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#verbatimLatitude">&{'verbatimLatitude'}</a></th><td> ${occurrence.verbatimLatitude}</td></tr>#{/if}
    #{if occurrence.verbatimLongitude}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#verbatimLongitude">&{'verbatimLongitude'}</a></th><td> ${occurrence.verbatimLongitude}</td></tr>#{/if}
    #{if occurrence.verbatimCoordinateSystem}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#verbatimCoordinateSystem">&{'verbatimCoordinateSystem'}</a></th><td> ${occurrence.verbatimCoordinateSystem}</td></tr>#{/if}
    #{if occurrence.verbatimSRS}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#verbatimSRS">&{'verbatimSRS'}</a></th><td> ${occurrence.verbatimSRS}</td></tr>#{/if}
    #{if occurrence.decimalLatitude}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#decimalLatitude">&{'decimalLatitude'}</a></th><td> ${occurrence.decimalLatitude}</td></tr>#{/if}
    #{if occurrence.decimalLongitude}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#decimalLongitude">&{'decimalLongitude'}</a></th><td> ${occurrence.decimalLongitude}</td></tr>#{/if}
    #{if occurrence.geodeticDatum}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#geodeticDatum">&{'geodeticDatum'}</a></th><td> ${occurrence.geodeticDatum}</td></tr>#{/if}
    #{if occurrence.coordinateUncertaintyInMeters}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#coordinateUncertaintyInMeters">&{'coordinateUncertaintyInMeters'}</a></th><td> ${occurrence.coordinateUncertaintyInMeters}</td></tr>#{/if}
    #{if occurrence.coordinatePrecision}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#coordinatePrecision">&{'coordinatePrecision'}</a></th><td> ${occurrence.coordinatePrecision}</td></tr>#{/if}
    #{if occurrence.pointRadiusSpatialFit}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#pointRadiusSpatialFit">&{'pointRadiusSpatialFit'}</a></th><td> ${occurrence.pointRadiusSpatialFit}</td></tr>#{/if}
    #{if occurrence.footprintWKT}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#footprintWKT">&{'footprintWKT'}</a></th><td> ${occurrence.footprintWKT}</td></tr>#{/if}
    #{if occurrence.footprintSRS}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#footprintSRS">&{'footprintSRS'}</a></th><td> ${occurrence.footprintSRS}</td></tr>#{/if}
    #{if occurrence.footprintSpatialFit}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#footprintSpatialFit">&{'footprintSpatialFit'}</a></th><td> ${occurrence.footprintSpatialFit}</td></tr>#{/if}
    #{if occurrence.georeferencedBy}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#georeferencedBy">&{'georeferencedBy'}</a></th><td> ${occurrence.georeferencedBy}</td></tr>#{/if}
    #{if occurrence.georeferencedDate}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#georeferencedDate">&{'georeferencedDate'}</a></th><td> ${occurrence.georeferencedDate}</td></tr>#{/if}
    #{if occurrence.georeferenceProtocol}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#georeferenceProtocol">&{'georeferenceProtocol'}</a></th><td> ${occurrence.georeferenceProtocol}</td></tr>#{/if}
    #{if occurrence.georeferenceSources}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#georeferenceSources">&{'georeferenceSources'}</a></th><td> ${occurrence.georeferenceSources}</td></tr>#{/if}
    #{if occurrence.georeferenceVerificationStatus}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#georeferenceVerificationStatus">&{'georeferenceVerificationStatus'}</a></th><td> ${occurrence.georeferenceVerificationStatus}</td></tr>#{/if}
    #{if occurrence.georeferenceRemarks}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#georeferenceRemarks">&{'georeferenceRemarks'}</a></th><td> ${occurrence.georeferenceRemarks}</td></tr>#{/if}
    </tbody>
    </table>  
  </div>
  #{/if}
  #{if occurrence.geologicalContextID || 
	   occurrence.earliestEonOrLowestEonothem || 
	   occurrence.latestEonOrHighestEonothem || 
	   occurrence.earliestEraOrLowestErathem || 
	   occurrence.latestEraOrHighestErathem || 
	   occurrence.earliestPeriodOrLowestSystem || 
	   occurrence.latestPeriodOrHighestSystem || 
	   occurrence.earliestEpochOrLowestSeries || 
	   occurrence.latestEpochOrHighestSeries || 
	   occurrence.earliestAgeOrLowestStage || 
	   occurrence.latestAgeOrHighestStage || 
	   occurrence.lowestBiostratigraphicZone || 
	   occurrence.highestBiostratigraphicZone || 
	   occurrence.lithostratigraphicTerms || 
	   occurrence.groupp || 
	   occurrence.formation || 
	   occurrence.member || 
	   occurrence.bed
  }
  <div class="location-info">
    <h3>Geological Context</h3>
    <table class="table table-condensed table-striped">
      <tbody>
    #{if occurrence.geologicalContextID}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#geologicalContextID">&{'geologicalContextID'}</a></th><td> ${occurrence.geologicalContextID}</td></tr>#{/if}
    #{if occurrence.earliestEonOrLowestEonothem}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#earliestEonOrLowestEonothem">&{'earliestEonOrLowestEonothem'}</a></th><td> ${occurrence.earliestEonOrLowestEonothem}</td></tr>#{/if}
    #{if occurrence.latestEonOrHighestEonothem}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#latestEonOrHighestEonothem">&{'latestEonOrHighestEonothem'}</a></th><td> ${occurrence.latestEonOrHighestEonothem}</td></tr>#{/if}
    #{if occurrence.earliestEraOrLowestErathem}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#earliestEraOrLowestErathem">&{'earliestEraOrLowestErathem'}</a></th><td> ${occurrence.earliestEraOrLowestErathem}</td></tr>#{/if}
    #{if occurrence.latestEraOrHighestErathem}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#latestEraOrHighestErathem">&{'latestEraOrHighestErathem'}</a></th><td> ${occurrence.latestEraOrHighestErathem}</td></tr>#{/if}
    #{if occurrence.earliestPeriodOrLowestSystem}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#earliestPeriodOrLowestSystem">&{'earliestPeriodOrLowestSystem'}</a></th><td> ${occurrence.earliestPeriodOrLowestSystem}</td></tr>#{/if}
    #{if occurrence.latestPeriodOrHighestSystem}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#latestPeriodOrHighestSystem">&{'latestPeriodOrHighestSystem'}</a></th><td> ${occurrence.latestPeriodOrHighestSystem}</td></tr>#{/if}
    #{if occurrence.earliestEpochOrLowestSeries}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#earliestEpochOrLowestSeries">&{'earliestEpochOrLowestSeries'}</a></th><td> ${occurrence.earliestEpochOrLowestSeries}</td></tr>#{/if}
    #{if occurrence.latestEpochOrHighestSeries}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#latestEpochOrHighestSeries">&{'latestEpochOrHighestSeries'}</a></th><td> ${occurrence.latestEpochOrHighestSeries}</td></tr>#{/if}
    #{if occurrence.earliestAgeOrLowestStage}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#earliestAgeOrLowestStage">&{'earliestAgeOrLowestStage'}</a></th><td> ${occurrence.earliestAgeOrLowestStage}</td></tr>#{/if}
    #{if occurrence.latestAgeOrHighestStage}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#latestAgeOrHighestStage">&{'latestAgeOrHighestStage'}</a></th><td> ${occurrence.latestAgeOrHighestStage}</td></tr>#{/if}
    #{if occurrence.lowestBiostratigraphicZone}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#lowestBiostratigraphicZone">&{'lowestBiostratigraphicZone'}</a></th><td> ${occurrence.lowestBiostratigraphicZone}</td></tr>#{/if}
    #{if occurrence.highestBiostratigraphicZone}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#highestBiostratigraphicZone">&{'highestBiostratigraphicZone'}</a></th><td> ${occurrence.highestBiostratigraphicZone}</td></tr>#{/if}
    #{if occurrence.lithostratigraphicTerms}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#lithostratigraphicTerms">&{'lithostratigraphicTerms'}</a></th><td> ${occurrence.lithostratigraphicTerms}</td></tr>#{/if}
    #{if occurrence.groupp}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#group">&{'group'}</a></th><td> ${occurrence.groupp}</td></tr>#{/if}
    #{if occurrence.formation}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#formation">&{'formation'}</a></th><td> ${occurrence.formation}</td></tr>#{/if}
    #{if occurrence.member}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#member">&{'member'}</a></th><td> ${occurrence.member}</td></tr>#{/if}
    #{if occurrence.bed}<tr><th><a href="http://darwincore.googlecode.com/svn/trunk/terms/index.htm#bed">&{'bed'}</a></th><td> ${occurrence.bed}</td></tr>#{/if} 
    
    </tbody>
    </table>  
  </div>
  #{/if}
</div>